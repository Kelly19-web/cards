<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cards</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- Croppie -->
  <link rel="stylesheet" href="https://unpkg.com/croppie/croppie.css" />
  <script src="https://unpkg.com/croppie/croppie.min.js"></script>

  <!-- Styles -->
  <link rel="stylesheet" href="styles.css?v=1" />

  <!-- PWA -->
  <link rel="manifest" href="manifest.json?v=1">
  <link rel="apple-touch-icon" href="icons/icon-512.png">
  <meta name="theme-color" content="#6a0dad">
</head>

<body>
  <header>
    <h1>Cards</h1>
    <p class="subtitle">Your Shelves</p>
  </header>

  <main>
    <section class="shelves-wrapper">
      <div class="shelves-list">
        <!-- JS injects shelves here -->
      </div>
    </section>
  </main>

  <!-- Floating Add Card button -->
  <button id="addBookBtn" class="add-btn">+ Add Card</button>

  <!-- ============================
          POPUP: Add Card
  ============================= -->
  <div id="addBookModal" class="popup-overlay">
    <div class="popup-container">

      <button id="closePopupBtn" class="popup-close">×</button>

      <!-- STEP 1 — CAMERA + CROP -->
      <div id="stepTakePhoto">

        <video id="cameraPreview" autoplay playsinline class="camera-preview"></video>

        <!-- Cropping area -->
        <div id="cropContainer" class="crop-container hidden">
          <img id="cropImage" />
        </div>

        <!-- BUTTON at the bottom only -->
        <div class="confirm-wrapper">
          <button id="confirmCropBtn" class="confirm-btn-bottom">
            ✔ Use This Image
          </button>
        </div>

      </div>

      <!-- STEP 2 — Shelf -->
      <div id="stepShelf" class="hidden">
        <h2 class="popup-title">Save to shelf</h2>

        <label for="shelfInput" class="input-label">Shelf Name</label>
        <input
          id="shelfInput"
          class="input"
          placeholder="e.g. houston, vegas, special sets"
        />

        <button id="saveBookBtn" class="btn-save">Save Card</button>
      </div>

    </div>
  </div>

  <!-- ============================
      FULLSCREEN IMAGE VIEWER
  ============================= -->
  <div id="imageViewer" class="viewer">
    <div class="viewer-inner">
      <button id="viewerClose" class="viewer-close">×</button>
      <div id="viewerCount" class="viewer-counter">1 / 1</div>
      <img id="viewerImg" class="viewer-img" src="" />
    </div>
  </div>

  <!-- App logic -->
  <script>
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("/cards/service-worker.js");
}
</script>
</body>
</html>